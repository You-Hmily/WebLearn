<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Node Js教程(runoob.com)</title>
    <script src="https://cdn.bootcss.com/react/15.4.2/react.min.js"></script>
    <script src="https://cdn.bootcss.com/react/15.4.2/react-dom.min.js"></script>
    <script src="https://cdn.bootcss.com/babel-standalone/6.22.1/babel.min.js"></script>
</head>
<body>
    <div id="container01"></div>
    <hr/>
    /** 交互传值！！**/
    <script type="text/babel">
        //主组件
        class App extends React.Component{
            constructor(props){
                super(props);
                var valueList=['AAA','BBB','CCC'];
                this.state={
                    values:valueList
                };
                this.addValueToListArrAndChangeState=this.addValueToListArrAndChangeState.bind(this);

            }
            addValueToListArrAndChangeState(value){
                let values=this.state.values;
                console.log(values);
                //添加到数组的方法
                values.unshift(value);
                //修改状态数组
                this.setState({
                    values:values
                });
            }
            render(){
                return (
                    <div>
                        <h2>添加数据互动</h2>
                        <ToDoValue addValueToListArr={this.addValueToListArrAndChangeState} length={this.state.values.length} />
                        <ShowValueList values={this.state.values}/>
                    </div>
                );
            }
        }
        //按键组件
        class ToDoValue extends React.Component{
            constructor(props){
                super(props);
                this.getValueAddToList=this.getValueAddToList.bind(this);
            }
            getValueAddToList(){
                let value=this.refs.msg.value;
                console.log(this.props)
                this.props.addValueToListArr(value);
                this.refs.msg.value='';
            }
            render(){
                return(
                    <div>
                        <input type="text" ref="msg"/>
                        <button onClick={this.getValueAddToList}>添加，长度为{this.props.length}</button>
                    </div>
                );
            }
        }
        //显示组件
        class ShowValueList extends React.Component{
            constructor(props){
                super(props);
            }
            render(){
                console.log(this.props)
                let values=this.props.values;
                return(
                    <ul>
                        {
                            values.map((item,index)=>{
                                return <li key={index}>{item}</li>
                            })
                        }
                    </ul>
                );
            }
        }
        ReactDOM.render(<App />,document.getElementById('container01'));
    </script>
</body>
</html>